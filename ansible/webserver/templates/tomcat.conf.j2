
upstream tomcat {
server 127.0.0.1:8443 fail_timeout=0;
}

server {
listen 80;
return 301 https://$host$request_uri;
client_max_body_size 0;
chunked_transfer_encoding on;
}

server {
listen 443;

ssl_certificate /etc/letsencrypt/live/{{ inventory_hostname }}/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/{{ inventory_hostname }}/privkey.pem;

error_log /var/log/nginx/tomcat-error.log;
access_log /var/log/nginx/tomcat-access.log;
client_max_body_size 0;
chunked_transfer_encoding on;

location / {
proxy_redirect off;
proxy_pass http://tomcat;
 }
}
